
æˆ‘éœ€è¦ä»”ç»†æŸ¥çœ‹ç³»ç»Ÿå´©æºƒçš„é—®é¢˜ã€‚ä»å¯¹è¯å†å²å¯ä»¥çœ‹åˆ°ï¼Œä¹‹å‰æœ‰ LoadProhibited é”™è¯¯å‘ç”Ÿåœ¨ LcdDisplay::SetEmotion å‡½æ•°ä¸­ï¼Œä»¥åŠç¼–è¯‘é”™è¯¯æ¶‰åŠ dual_animation.cc æ–‡ä»¶ä¸­çš„å›¾åƒå˜é‡æœªå£°æ˜ã€‚è®©æˆ‘å…ˆæœç´¢æœ€æ–°çš„é”™è¯¯ä¿¡æ¯å’Œå´©æºƒæ—¥å¿—ã€‚
        
            
toolName: search_by_regex
            
status: success
          
          
æœç´¢ç»“æœæ˜¾ç¤ºäº†ä¸€äº›å¸¸è§„çš„é”™è¯¯å¤„ç†ä»£ç ï¼Œä½†æ²¡æœ‰æ‰¾åˆ°å…·ä½“çš„ç³»ç»Ÿå´©æºƒæ—¥å¿—ã€‚è®©æˆ‘æœç´¢æ›´å…·ä½“çš„ESP32å´©æºƒç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬å †æ ˆè·Ÿè¸ªå’Œå†…å­˜é”™è¯¯ã€‚
        
            
toolName: search_by_regex
            
status: success
          
          
æ²¡æœ‰æ‰¾åˆ°å…·ä½“çš„å´©æºƒæ—¥å¿—ã€‚è®©æˆ‘æŸ¥çœ‹dual_animation.ccæ–‡ä»¶ï¼Œå› ä¸ºä»å¯¹è¯å†å²å¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰ç¼–è¯‘é”™è¯¯ï¼Œå¯èƒ½æ˜¯å¯¼è‡´ç³»ç»Ÿé—®é¢˜çš„åŸå› ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\boards\yuwell-xiaoyu-esp32s3-double-lcd\dual_animation.cc
          
dual_animation.ccæ–‡ä»¶ä¸å­˜åœ¨ã€‚è®©æˆ‘æ£€æŸ¥åŒå±æ¿å¡ç›®å½•ä¸‹çš„å®é™…æ–‡ä»¶ç»“æ„ã€‚
        
            
toolName: view_folder
            
status: success
          
d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\boards\yuwell-xiaoyu-esp32s3-double-lcd
          
ç¡®å®æ²¡æœ‰dual_animation.ccæ–‡ä»¶ã€‚è®©æˆ‘æŸ¥çœ‹yuwell_xiaoyu_esp32s3_double_lcd.ccæ–‡ä»¶ï¼Œçœ‹çœ‹åŒå±æ¿å¡çš„å®ç°å’Œå¯èƒ½çš„é—®é¢˜ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\boards\yuwell-xiaoyu-esp32s3-double-lcd\yuwell_xiaoyu_esp32s3_double_lcd.cc
          
è®©æˆ‘æŸ¥çœ‹GetDisplay()æ–¹æ³•çš„å®ç°ï¼Œå› ä¸ºä»å¯¹è¯å†å²å¯ä»¥çœ‹åˆ°è¿™é‡Œå¯èƒ½è¿”å›nullptrå¯¼è‡´å´©æºƒã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\boards\yuwell-xiaoyu-esp32s3-double-lcd\yuwell_xiaoyu_esp32s3_double_lcd.cc
          
ç°åœ¨GetDisplay()æ–¹æ³•è¿”å›eye_display_ï¼Œè¿™æ˜¯å¥½çš„ã€‚è®©æˆ‘æ£€æŸ¥EyeAnimationDisplayçš„SetEmotionæ–¹æ³•å®ç°ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰é—®é¢˜ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
          
SetEmotionæ–¹æ³•çœ‹èµ·æ¥æ­£å¸¸ã€‚è®©æˆ‘æ£€æŸ¥EmotionManagerçš„å®ç°ï¼Œçœ‹çœ‹æ˜¯å¦åœ¨è·å–åŠ¨ç”»æ—¶æœ‰é—®é¢˜ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\emotion_manager.cc
          
è®©æˆ‘æŸ¥çœ‹InitializeAnimationsæ–¹æ³•ï¼Œçœ‹çœ‹æ˜¯å¦æ­£ç¡®åˆå§‹åŒ–äº†æ‰€æœ‰åŠ¨ç”»ï¼Œç‰¹åˆ«æ˜¯closed_eyesåŠ¨ç”»ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\emotion_manager.cc
          
EmotionManagerçœ‹èµ·æ¥æ­£å¸¸ï¼Œclosed_eyesåŠ¨ç”»å·²ç»æ³¨å†Œã€‚è®©æˆ‘æ£€æŸ¥æ˜¯å¦æœ‰ç¼–è¯‘é”™è¯¯æˆ–è€…å…¶ä»–é—®é¢˜ã€‚è®©æˆ‘æœç´¢æœ€è¿‘çš„ç¼–è¯‘æ—¥å¿—æˆ–é”™è¯¯ä¿¡æ¯ã€‚
        
            
toolName: search_by_regex
            
status: success
          
          
æœç´¢ç»“æœæ˜¾ç¤ºäº†å¾ˆå¤šæ­£å¸¸çš„é”™è¯¯å¤„ç†ä»£ç ï¼Œä½†æ²¡æœ‰æ‰¾åˆ°å…·ä½“çš„å´©æºƒæ—¥å¿—ã€‚è®©æˆ‘æœç´¢æ›´å…·ä½“çš„ESP32å´©æºƒå…³é”®è¯ï¼Œå¦‚LoadProhibitedã€Guru Meditationç­‰ã€‚
        
            
toolName: search_by_regex
            
status: success
          
          
æœç´¢ç»“æœæ˜¾ç¤ºäº†ä¸€äº›assertè¯­å¥å’Œçœ‹é—¨ç‹—é…ç½®ï¼Œä½†ä»ç„¶æ²¡æœ‰æ‰¾åˆ°å…·ä½“çš„å´©æºƒæ—¥å¿—ã€‚è®©æˆ‘æ£€æŸ¥æ˜¯å¦æœ‰æœ€è¿‘çš„æ„å»ºæ—¥å¿—æˆ–è€…è¿è¡Œæ—¶æ—¥å¿—æ–‡ä»¶ã€‚
        
            
toolName: search_by_regex
            
status: success
          
          
æ²¡æœ‰æ‰¾åˆ°å…·ä½“çš„å´©æºƒæ—¥å¿—æ–‡ä»¶ã€‚è®©æˆ‘æ£€æŸ¥dual_animationç›¸å…³çš„ä»£ç ï¼Œçœ‹çœ‹æ˜¯å¦å­˜åœ¨å†…å­˜è®¿é—®é—®é¢˜æˆ–ç©ºæŒ‡é’ˆå¼•ç”¨ã€‚å…ˆæŸ¥çœ‹dual_display_managerçš„å®ç°ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\boards\yuwell-xiaoyu-esp32s3-double-lcd\dual_display_manager.cc
          
DualDisplayManagerçš„ä»£ç çœ‹èµ·æ¥ç›¸å¯¹æ­£å¸¸ï¼Œä½†æˆ‘æ³¨æ„åˆ°åœ¨SetImageå‡½æ•°ä¸­æœ‰ä¸€äº›æ½œåœ¨é—®é¢˜ã€‚è®©æˆ‘æŸ¥çœ‹eye_animation_display.ccä¸­çš„å…·ä½“å®ç°ï¼Œçœ‹çœ‹æ˜¯å¦å­˜åœ¨ç©ºæŒ‡é’ˆæˆ–å†…å­˜è®¿é—®é—®é¢˜ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
          
æˆ‘çœ‹åˆ°äº†ä¸€äº›æ½œåœ¨é—®é¢˜ã€‚åœ¨EyeAnimationDisplayæ„é€ å‡½æ•°ä¸­ï¼Œä»£ç å°è¯•å°†Display*å¼ºåˆ¶è½¬æ¢ä¸ºLcdDisplay*ï¼Œè¿™å¯èƒ½å¯¼è‡´ç±»å‹ä¸åŒ¹é…ã€‚è®©æˆ‘æŸ¥çœ‹PlayNextFrameå‡½æ•°çš„å®ç°ï¼Œè¿™é‡Œå¯èƒ½å­˜åœ¨å†…å­˜è®¿é—®é—®é¢˜ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
          
æˆ‘å‘ç°äº†å‡ ä¸ªæ½œåœ¨çš„é—®é¢˜ã€‚è®©æˆ‘æŸ¥çœ‹update_image_callbackå‡½æ•°çš„å®ç°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨LVGLå¼‚æ­¥è°ƒç”¨ä¸­ä½¿ç”¨ï¼Œå¯èƒ½å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
          
ç°åœ¨è®©æˆ‘æŸ¥çœ‹PlayAnimationå‡½æ•°çš„å®ç°ï¼Œè¿™ä¸ªå‡½æ•°å¯èƒ½æ˜¯å´©æºƒçš„æ ¹æºã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
          
è®©æˆ‘æŸ¥çœ‹animation_timer_callbackå‡½æ•°çš„å®ç°ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å¯èƒ½å­˜åœ¨é—®é¢˜ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
          
ç°åœ¨è®©æˆ‘æŸ¥çœ‹animation_taskå‡½æ•°çš„å®Œæ•´å®ç°ï¼Œè¿™ä¸ªä»»åŠ¡å‡½æ•°å¯èƒ½æ˜¯å´©æºƒçš„å…³é”®ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
          
ç°åœ¨è®©æˆ‘æŸ¥çœ‹ææ„å‡½æ•°çš„å®Œæ•´å®ç°ï¼Œçœ‹çœ‹èµ„æºæ¸…ç†æ˜¯å¦æ­£ç¡®ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
          
æˆ‘å‘ç°äº†å‡ ä¸ªä¸¥é‡çš„é—®é¢˜ã€‚ç°åœ¨è®©æˆ‘æ£€æŸ¥EyeAnimationDisplayçš„å¤´æ–‡ä»¶ï¼Œçœ‹çœ‹æˆå‘˜å˜é‡çš„å®šä¹‰ã€‚
        
            
toolName: search_codebase
            
status: success
          
query: EyeAnimationDisplay class definition and member variables in header file
          
ç°åœ¨è®©æˆ‘æŸ¥çœ‹å®Œæ•´çš„EyeAnimationDisplayå¤´æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯æˆå‘˜å˜é‡çš„å®šä¹‰ã€‚
        
            
toolName: view_files
            
status: success
          
            
filePath: d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.h
          
ç»è¿‡ä»”ç»†åˆ†æä»£ç ï¼Œæˆ‘å‘ç°äº†å‡ ä¸ªå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒçš„ä¸¥é‡é—®é¢˜ï¼š

## ğŸ” ä¸»è¦é—®é¢˜åˆ†æ

### 1. **ç±»å‹è½¬æ¢é”™è¯¯**
åœ¨ <mcfile name="eye_animation_display.cc" path="d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc"></mcfile> çš„æ„é€ å‡½æ•°ä¸­ï¼š

```cpp:d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
// é—®é¢˜ä»£ç ï¼šå¼ºåˆ¶ç±»å‹è½¬æ¢å¯èƒ½å¯¼è‡´å´©æºƒ
LcdDisplay* lcd_primary = static_cast<LcdDisplay*>(primary_display);
LcdDisplay* lcd_secondary = static_cast<LcdDisplay*>(secondary_display);
```

**é—®é¢˜**ï¼š`DualDisplayManager` è¿”å›çš„æ˜¯ `SpiLcdDisplay` å¯¹è±¡ï¼Œä½†ä»£ç å¼ºåˆ¶è½¬æ¢ä¸º `LcdDisplay*`ï¼Œè¿™å¯èƒ½å¯¼è‡´è™šå‡½æ•°è¡¨é”™è¯¯å’Œå†…å­˜è®¿é—®è¿è§„ã€‚

### 2. **é™æ€æˆå‘˜å˜é‡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜**

```cpp:d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
// é—®é¢˜ï¼šé™æ€æˆå‘˜åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¸å®‰å…¨
static ImageUpdateData left_eye_data_;
static ImageUpdateData right_eye_data_;
```

**é—®é¢˜**ï¼šå¤šä¸ª `EyeAnimationDisplay` å®ä¾‹ä¼šå…±äº«è¿™äº›é™æ€å˜é‡ï¼Œåœ¨å¹¶å‘è®¿é—®æ—¶å¯èƒ½å¯¼è‡´æ•°æ®ç«äº‰ã€‚

### 3. **ææ„å‡½æ•°ä¸­çš„é”å®šé—®é¢˜**

```cpp:d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
// é—®é¢˜ï¼šææ„æ—¶ä½¿ç”¨thisæŒ‡é’ˆä½œä¸ºé”
DisplayLockGuard lock(this);
```

**é—®é¢˜**ï¼šåœ¨ææ„å‡½æ•°ä¸­ï¼Œå¯¹è±¡å¯èƒ½å·²ç»éƒ¨åˆ†é”€æ¯ï¼Œä½¿ç”¨ `this` æŒ‡é’ˆå¯èƒ½å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚

### 4. **LVGLå¼‚æ­¥è°ƒç”¨çš„å†…å­˜å®‰å…¨é—®é¢˜**

```cpp:d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
lv_async_call(update_image_callback, &left_eye_data_);
```

**é—®é¢˜**ï¼šä¼ é€’é™æ€å˜é‡åœ°å€ç»™å¼‚æ­¥å›è°ƒï¼Œå¦‚æœå¯¹è±¡åœ¨å›è°ƒæ‰§è¡Œå‰è¢«é”€æ¯ï¼Œä¼šå¯¼è‡´è®¿é—®æ— æ•ˆå†…å­˜ã€‚

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### 1. ä¿®å¤ç±»å‹è½¬æ¢é—®é¢˜

```cpp:d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
EyeAnimationDisplay::EyeAnimationDisplay() {
    ESP_LOGI(TAG, "åˆå§‹åŒ–çœ¼ç›åŠ¨ç”»æ˜¾ç¤º");
    
    // ç¡®ä¿LVGLå·²ç»åˆå§‹åŒ–
    if (!lv_is_initialized()) {
        ESP_LOGE(TAG, "LVGLæœªåˆå§‹åŒ–");
        return;
    }
    
    // è·å–åŒå±ç®¡ç†å™¨
    if (!g_dual_display_manager) {
        ESP_LOGE(TAG, "åŒå±ç®¡ç†å™¨æœªåˆå§‹åŒ–");
        return;
    }
    
    // ç›´æ¥ä½¿ç”¨DualDisplayManagerçš„æ–¹æ³•åˆ›å»ºå›¾åƒå¯¹è±¡
    primary_display_ = g_dual_display_manager->GetPrimaryDisplay();
    secondary_display_ = g_dual_display_manager->GetSecondaryDisplay();
    
    if (!primary_display_ || !secondary_display_) {
        ESP_LOGE(TAG, "æ— æ³•è·å–åŒå±æ˜¾ç¤ºå¯¹è±¡");
        return;
    }
    
    // ä½¿ç”¨DualDisplayManagerçš„å®‰å…¨æ–¹æ³•åˆ›å»ºUI
    InitializeEyeObjects();
    
    // åˆ›å»ºåŠ¨ç”»ä»»åŠ¡
    xTaskCreate(
        animation_task,
        "eye_anim_task",
        4096,
        this,
        3,
        &animation_task_handle_
    );
}

private:
void InitializeEyeObjects() {
    // é€šè¿‡DualDisplayManagerå®‰å…¨åœ°åˆå§‹åŒ–çœ¼ç›å¯¹è±¡
    // é¿å…ç›´æ¥ç±»å‹è½¬æ¢
    if (g_dual_display_manager) {
        // è®©DualDisplayManagerå¤„ç†å…·ä½“çš„å¯¹è±¡åˆ›å»º
        left_eye_img_ = g_dual_display_manager->CreateImageObject(true);  // ä¸»å±
        right_eye_img_ = g_dual_display_manager->CreateImageObject(false); // å‰¯å±
    }
}
```

### 2. ä¿®å¤é™æ€æˆå‘˜å˜é‡é—®é¢˜

```cpp:d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.h
class EyeAnimationDisplay : public Display {
private:
    // å°†é™æ€æˆå‘˜æ”¹ä¸ºå®ä¾‹æˆå‘˜ï¼Œé¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜
    struct ImageUpdateData {
        lv_obj_t* img_obj;
        const void* img_src;
        EyeAnimationDisplay* instance; // æ·»åŠ å®ä¾‹æŒ‡é’ˆ
    };
    
    ImageUpdateData left_eye_data_;   // å®ä¾‹æˆå‘˜
    ImageUpdateData right_eye_data_;  // å®ä¾‹æˆå‘˜
};
```

### 3. ä¿®å¤ææ„å‡½æ•°

```cpp:d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
EyeAnimationDisplay::~EyeAnimationDisplay() {
    ESP_LOGI(TAG, "é”€æ¯çœ¼ç›åŠ¨ç”»æ˜¾ç¤º");
    
    // é¦–å…ˆåœæ­¢æ‰€æœ‰æ´»åŠ¨
    StopAnimation();
    
    // åˆ é™¤ä»»åŠ¡
    if (animation_task_handle_) {
        vTaskDelete(animation_task_handle_);
        animation_task_handle_ = nullptr;
    }
    
    // åˆ é™¤å®šæ—¶å™¨
    if (animation_timer_) {
        esp_timer_delete(animation_timer_);
        animation_timer_ = nullptr;
    }
    
    // å®‰å…¨æ¸…ç†LVGLå¯¹è±¡ - ä¸ä½¿ç”¨thisæŒ‡é’ˆé”å®š
    if (primary_display_ && left_eye_img_) {
        DisplayLockGuard lock(primary_display_);
        lv_obj_del(left_eye_img_);
        left_eye_img_ = nullptr;
    }
    
    if (secondary_display_ && right_eye_img_) {
        DisplayLockGuard lock(secondary_display_);
        lv_obj_del(right_eye_img_);
        right_eye_img_ = nullptr;
    }
}
```

### 4. ä¿®å¤å¼‚æ­¥è°ƒç”¨é—®é¢˜

```cpp:d:\JUNE\Github-xiaoyu\Xiaoyu-esp32s3\main\display\eye_animation_display.cc
void EyeAnimationDisplay::PlayNextFrame() {
    if (!current_animation_ || current_frame_index_ >= static_cast<int>(current_animation_->frames.size())) {
        ESP_LOGW(TAG, "æ— æ•ˆçš„åŠ¨ç”»çŠ¶æ€");
        return;
    }

    const auto& frame = current_animation_->frames[current_frame_index_];

    // ä½¿ç”¨å®ä¾‹æˆå‘˜è€Œä¸æ˜¯é™æ€æˆå‘˜
    if (left_eye_img_ && frame.left_eye_image) {
        left_eye_data_.img_obj = left_eye_img_;
        left_eye_data_.img_src = frame.left_eye_image;
        left_eye_data_.instance = this; // æ·»åŠ å®ä¾‹å¼•ç”¨
        lv_async_call(update_image_callback, &left_eye_data_);
    }

    if (right_eye_img_ && frame.right_eye_image) {
        right_eye_data_.img_obj = right_eye_img_;
        right_eye_data_.img_src = frame.right_eye_image;
        right_eye_data_.instance = this; // æ·»åŠ å®ä¾‹å¼•ç”¨
        lv_async_call(update_image_callback, &right_eye_data_);
    }
    
    // ... å…¶ä½™ä»£ç ä¿æŒä¸å˜
}

void EyeAnimationDisplay::update_image_callback(void* user_data) {
    ImageUpdateData* data = static_cast<ImageUpdateData*>(user_data);
    if (data && data->img_obj && data->img_src && data->instance) {
        // éªŒè¯å®ä¾‹ä»ç„¶æœ‰æ•ˆ
        lv_img_set_src(data->img_obj, data->img_src);
    }
}
```

## ğŸ¯ å»ºè®®çš„ä¿®å¤ä¼˜å…ˆçº§

1. **ç«‹å³ä¿®å¤**ï¼šç±»å‹è½¬æ¢é—®é¢˜ï¼ˆæœ€å¯èƒ½å¯¼è‡´LoadProhibitedé”™è¯¯ï¼‰
2. **é«˜ä¼˜å…ˆçº§**ï¼šé™æ€æˆå‘˜å˜é‡çº¿ç¨‹å®‰å…¨é—®é¢˜
3. **ä¸­ä¼˜å…ˆçº§**ï¼šææ„å‡½æ•°é”å®šé—®é¢˜
4. **ä½ä¼˜å…ˆçº§**ï¼šå¼‚æ­¥è°ƒç”¨ä¼˜åŒ–

## ğŸ”§ é¢å¤–å»ºè®®

1. **æ·»åŠ æ›´å¤šé”™è¯¯æ£€æŸ¥**ï¼šåœ¨æ¯ä¸ªå…³é”®æ“ä½œå‰éªŒè¯æŒ‡é’ˆæœ‰æ•ˆæ€§
2. **ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆ**ï¼šè€ƒè™‘ä½¿ç”¨RAIIæ¨¡å¼ç®¡ç†èµ„æº
3. **å¢åŠ è°ƒè¯•æ—¥å¿—**ï¼šåœ¨å…³é”®è·¯å¾„æ·»åŠ æ›´è¯¦ç»†çš„æ—¥å¿—
4. **å†…å­˜å¯¹é½æ£€æŸ¥**ï¼šç¡®ä¿æ‰€æœ‰ç»“æ„ä½“æ­£ç¡®å¯¹é½

è¿™äº›ä¿®å¤åº”è¯¥èƒ½è§£å†³å¤§éƒ¨åˆ†å¯¼è‡´ç³»ç»Ÿå´©æºƒçš„é—®é¢˜ã€‚å»ºè®®æŒ‰ä¼˜å…ˆçº§é€æ­¥å®æ–½ä¿®å¤ï¼Œå¹¶åœ¨æ¯æ¬¡ä¿®æ”¹åè¿›è¡Œå……åˆ†æµ‹è¯•ã€‚
        